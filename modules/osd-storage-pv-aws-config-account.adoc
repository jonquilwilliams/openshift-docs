// Module included in the following assemblies:
//
// * storage/persistent_storage/

[id="osd-storage-pv-aws-config-account_{context}"]
= Configuring the AWS account

Set up your AWS account to prepare EFS for use by {product-title}.

.Procedure

. Log in to the link:https://console.aws.amazon.com/ec2[AWS EC2 Console].
. Ensure that the correct region is Clicked to match your cluster install region.
. Filter only worker EC2 instances.
. Click an instance and take note of the VPC ID and Security Group ID.
. Click the *Security* tab, and click the Security Group Name.
. From the *Actions* dropdown menu, click *Edit Inbound Rules*.
. Scroll to the bottom and click *Add Rule*.
. Add an NFS rule allowing NFS traffic from the VPC private CIDR.
. Open the link:https://console.aws.amazon.com/efs/[Amazon EFS page]. Click *Create file system* to create the EFS.
. Click *Customize* and proceed through the wizard.
. In `Step 2:`, configure the network access:
.. Click the VPC of the cluster that you noted previously.
.. Ensure that the private subnets are selected.
.. Select the Security Group Name that you noted earlier for the EC2 worker instances.
.. Click *Next*.
. In `Step 3:`, configure the client access:
.. Click *Add access point*.
.. Enter a unique Path such as `/access_point_1`.
.. Configure the Owner fields with ownership or permissions that will allow write access for your worker pods. For example, if your worker pods run with group ID `100`, you can set that ID as your `Owner Group ID` and ensure the Permissions include `g+rwx`.
. Proceed through the wizard and click *Create File System*.
. After the file system is created:
.. Note the file system ID for later use.
.. Click `Manage client access` and note the access point ID.

Steps 8-12 can be repeated to create separate shared data stores. In each case, make note of the corresponding file system ID and access point ID.
