[id="osd-persistent-storage-aws"]
= Setting up AWS EFS for {product-title}
include::modules/attributes-openshift-dedicated.adoc[]
:context: osd-persistent-storage-aws

toc::[]

The Amazon Web Services (AWS) Elastic File System (EFS) is a simple Network File System (NFS) that can be provisioned on {product-title} clusters. AWS also provides and supports a CSI EFS Driver to be used with Kubernetes that allows Kubernetes workloads to leverage this shared file storage.

This document shows the steps needed to set up your AWS account to prepare EFS to be used by {product-title}.

[IMPORTANT]
====
Red Hat does not provide official support for this feature including backup and recovery. The customer is responsible for backing up the EFS data and recovering it in the event of an outage or data loss.
====

At a high level, the steps required to enable EFS on a cluster are:

. Create AWS EFS in cluster's AWS Account.
. Install the AWS EFS Operator from OperatorHub.
. Create SharedVolume custom resources.
. Use the generated PersistentVolumeClaims in pod `spec.volumes`.

== Prerequisites
. Customer Cloud Subscription (CCS) for a {product-title} cluster
. Administrator access to the AWS Account of that cluster

include::modules/osd-storage-pv-aws-config-account.adoc[leveloffset=+1]
include::modules/osd-storage-pv-aws-install-efs.adoc[leveloffset=+1]
include::modules/osd-storage-pv-aws-create-sharedvolumes.adoc[leveloffset=+1]
include::modules/osd-storage-pv-aws-connect-pods.adoc[leveloffset=+1]
include::modules/osd-storage-pv-aws-uninstall-efs.adoc[leveloffset=+1]
